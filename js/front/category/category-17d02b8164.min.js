function changeHeaderMiniCart(e){e?($(".header-mini-cart-empty-j").hide(),$(".header-mini-cart-not-empty-j").show()):($(".header-mini-cart-not-empty-j").hide(),$(".header-mini-cart-empty-j").show()),$("#header-mini-cart-quantity-val-j").html(e)}!function(e){if("function"==typeof define&&define.amd)define(["jquery"],e);else if("object"==typeof exports){var t=require("jquery");module.exports=e(t)}else e(window.jQuery||window.Zepto||window.$)}(function(e){"use strict";e.fn.serializeJSON=function(t){var n,a,r,i,o,s,u,c,l,d,p,m,f;return n=e.serializeJSON,a=this,r=n.setupOpts(t),i=a.serializeArray(),n.readCheckboxUncheckedValues(i,r,a),o={},e.each(i,function(e,t){s=t.name,u=t.value,l=n.extractTypeAndNameWithNoType(s),d=l.nameWithNoType,(p=l.type)||(p=n.attrFromInputWithName(a,s,"data-value-type")),n.validateType(s,p,r),"skip"!==p&&(m=n.splitInputNameIntoKeysArray(d),c=n.parseValue(u,s,p,r),(f=!c&&n.shouldSkipFalsy(a,s,d,p,r))||n.deepSet(o,m,c,r))}),o},e.serializeJSON={defaultOptions:{checkboxUncheckedValue:void 0,parseNumbers:!1,parseBooleans:!1,parseNulls:!1,parseAll:!1,parseWithFunction:null,skipFalsyValuesForTypes:[],skipFalsyValuesForFields:[],customTypes:{},defaultTypes:{string:function(e){return String(e)},number:function(e){return Number(e)},boolean:function(e){return-1===["false","null","undefined","","0"].indexOf(e)},null:function(e){return-1===["false","null","undefined","","0"].indexOf(e)?e:null},array:function(e){return JSON.parse(e)},object:function(e){return JSON.parse(e)},auto:function(t){return e.serializeJSON.parseValue(t,null,null,{parseNumbers:!0,parseBooleans:!0,parseNulls:!0})},skip:null},useIntKeysAsArrayIndex:!1},setupOpts:function(t){var n,a,r,i,o,s;s=e.serializeJSON,null==t&&(t={}),r=s.defaultOptions||{},a=["checkboxUncheckedValue","parseNumbers","parseBooleans","parseNulls","parseAll","parseWithFunction","skipFalsyValuesForTypes","skipFalsyValuesForFields","customTypes","defaultTypes","useIntKeysAsArrayIndex"];for(n in t)if(-1===a.indexOf(n))throw new Error("serializeJSON ERROR: invalid option '"+n+"'. Please use one of "+a.join(", "));return i=function(e){return!1!==t[e]&&""!==t[e]&&(t[e]||r[e])},o=i("parseAll"),{checkboxUncheckedValue:i("checkboxUncheckedValue"),parseNumbers:o||i("parseNumbers"),parseBooleans:o||i("parseBooleans"),parseNulls:o||i("parseNulls"),parseWithFunction:i("parseWithFunction"),skipFalsyValuesForTypes:i("skipFalsyValuesForTypes"),skipFalsyValuesForFields:i("skipFalsyValuesForFields"),typeFunctions:e.extend({},i("defaultTypes"),i("customTypes")),useIntKeysAsArrayIndex:i("useIntKeysAsArrayIndex")}},parseValue:function(t,n,a,r){var i,o;return i=e.serializeJSON,o=t,r.typeFunctions&&a&&r.typeFunctions[a]?o=r.typeFunctions[a](t):r.parseNumbers&&i.isNumeric(t)?o=Number(t):!r.parseBooleans||"true"!==t&&"false"!==t?r.parseNulls&&"null"==t&&(o=null):o="true"===t,r.parseWithFunction&&!a&&(o=r.parseWithFunction(o,n)),o},isObject:function(e){return e===Object(e)},isUndefined:function(e){return void 0===e},isValidArrayIndex:function(e){return/^[0-9]+$/.test(String(e))},isNumeric:function(e){return e-parseFloat(e)>=0},optionKeys:function(e){if(Object.keys)return Object.keys(e);var t,n=[];for(t in e)n.push(t);return n},readCheckboxUncheckedValues:function(t,n,a){var r,i,o;null==n&&(n={}),e.serializeJSON,r="input[type=checkbox][name]:not(:checked):not([disabled])",a.find(r).add(a.filter(r)).each(function(a,r){if(i=e(r),null==(o=i.attr("data-unchecked-value"))&&(o=n.checkboxUncheckedValue),null!=o){if(r.name&&-1!==r.name.indexOf("[]["))throw new Error("serializeJSON ERROR: checkbox unchecked values are not supported on nested arrays of objects like '"+r.name+"'. See https://github.com/marioizquierdo/jquery.serializeJSON/issues/67");t.push({name:r.name,value:o})}})},extractTypeAndNameWithNoType:function(e){var t;return(t=e.match(/(.*):([^:]+)$/))?{nameWithNoType:t[1],type:t[2]}:{nameWithNoType:e,type:null}},shouldSkipFalsy:function(t,n,a,r,i){var o=e.serializeJSON.attrFromInputWithName(t,n,"data-skip-falsy");if(null!=o)return"false"!==o;var s=i.skipFalsyValuesForFields;if(s&&(-1!==s.indexOf(a)||-1!==s.indexOf(n)))return!0;var u=i.skipFalsyValuesForTypes;return null==r&&(r="string"),!(!u||-1===u.indexOf(r))},attrFromInputWithName:function(e,t,n){var a,r;return a=t.replace(/(:|\.|\[|\]|\s)/g,"\\$1"),r='[name="'+a+'"]',e.find(r).add(e.filter(r)).attr(n)},validateType:function(t,n,a){var r,i;if(i=e.serializeJSON,r=i.optionKeys(a?a.typeFunctions:i.defaultOptions.defaultTypes),n&&-1===r.indexOf(n))throw new Error("serializeJSON ERROR: Invalid type "+n+" found in input name '"+t+"', please use one of "+r.join(", "));return!0},splitInputNameIntoKeysArray:function(t){var n;return e.serializeJSON,n=t.split("["),""===(n=e.map(n,function(e){return e.replace(/\]/g,"")}))[0]&&n.shift(),n},deepSet:function(t,n,a,r){var i,o,s,u,c,l;if(null==r&&(r={}),(l=e.serializeJSON).isUndefined(t))throw new Error("ArgumentError: param 'o' expected to be an object or array, found undefined");if(!n||0===n.length)throw new Error("ArgumentError: param 'keys' expected to be an array with least one element");i=n[0],1===n.length?""===i?t.push(a):t[i]=a:(o=n[1],""===i&&(u=t.length-1,c=t[u],i=l.isObject(c)&&(l.isUndefined(c[o])||n.length>2)?u:u+1),""===o?!l.isUndefined(t[i])&&e.isArray(t[i])||(t[i]=[]):r.useIntKeysAsArrayIndex&&l.isValidArrayIndex(o)?!l.isUndefined(t[i])&&e.isArray(t[i])||(t[i]=[]):!l.isUndefined(t[i])&&l.isObject(t[i])||(t[i]={}),s=n.slice(1),l.deepSet(t[i],s,a,r))}}}),$(function(){$("#wrapper-j").on("change",".sku-radio-j",function(){var e=$(this);$("#product_thumb_"+e.data("product-id")+"_val_j").html(e.data("price"))}).on("change",".sku-select-j",function(){var e=$(this).find(":selected");$("#product_thumb_"+e.data("product-id")+"_val_j").html(e.data("price"))})}),$(function(){$("#wrapper-j").on("click",".add-to-cart-j, .product-page-add-to-cart-j",function(t){var n=$(this),a=$('input[name="product_'+n.data("product-id")+'"]');if(a.length)r=a.filter(":checked").val();else var r=$('select[name="product_'+n.data("product-id")+'"] option:selected').val();var i={sku_id:r,quantity:1};$.ajax({method:"POST",url:"/cart/add",data:i,beforeSend:function(){n.attr("disabled",!0)},success:function(t){e(n,t.sku),changeHeaderMiniCart(t.totals.quantity),$("#add-to-basket-modal-templating-j").html(t.sku_view),$("#add-to-basket-modal-j").modal("show")},complete:function(){n.attr("disabled",!1)}})});var e=function(e,t){return window.dataLayer.push({ecommerce:{currencyCode:"RUB",add:{products:[{id:t.product.id,name:t.product.name,price:t.price,category:t.product.breadcrumbs_plain,variant:t.name}]}}}),gtag("event","add_to_cart",{items:[{id:t.product.id,name:t.product.name,price:t.price,category:t.product.breadcrumbs_plain,variant:t.name}]}),e.is(".product-page-add-to-cart-j")?gtag("event","AddToCartFromPDP",{event_category:"Button"}):"/"==window.location.pathname?gtag("event","AddToCartFromHome",{event_category:"Button"}):gtag("event","AddToCartFromCategory",{event_category:"Button"})}}),$(function(){function e(e){$.ajax({data:e,beforeSend:function(){startSpinner(n)},success:function(e){a.html(e.items),r.html(e.more)},complete:function(){stopSpinner(n)}})}var t=$(".list-filter-form-j"),n=$("#product-grid-j"),a=$("#product-grid-templating-j"),r=$("#product-grid-more-templating-j"),i=$("#pagination-templating-j"),o=$("#wrapper-j"),s=$("#sort-form-j"),u=$("input[name=sort_by]");o.on("click",".pagination-link-j",function(e){e.preventDefault();var t=$(this).attr("href"),o=t.split("?")[1],s=u.filter(":checked").val(),c=window.location.href.split("?")[0];"page=1"==o?(t=c,""!=s&&(t=t+"?sort_by="+s)):""!=s&&(t=t+"&sort_by="+s),$.ajax({url:t,beforeSend:function(){startSpinner(n)},success:function(e){a.html(e.items),r.html(e.more),i.html(e.pages),void 0!==changeCategoryPageContent&&changeCategoryPageContent(e.seo_h1,e.meta_title,e.meta_description,e.summary,e.description),changeWindowUrl(t),$("body").animate({scrollTop:$(n).offset().top-50},0)},complete:function(){stopSpinner(n)}})}),o.on("click",".pagination-link-more-j",function(e){e.preventDefault();var o={};t.length>0&&(o=t.serializeJSON()),o.page=getUrlParameterByName("page",$(this).attr("href")),o.sortBy=u.filter(":checked").val(),$.ajax({data:o,beforeSend:function(){startSpinner(n)},success:function(e){gtag("event","LoadMore",{event_category:"Link"}),a.append(e.items),r.html(e.more),i.html(e.pages)},complete:function(){stopSpinner(n)}})}),u.on("change",function(){var e=window.location.href.split("?")[0];""!=$(this).filter(":checked").val()&&(e=e+"?"+s.serialize()),$.ajax({url:e,beforeSend:function(){startSpinner(n)},success:function(t){a.html(t.items),r.html(t.more),i.html(t.pages),$.fn.changeCategoryPageContent&&changeCategoryPageContent(t.meta_title,t.meta_description,t.summary,t.description),changeWindowUrl(e)},complete:function(){stopSpinner(n)}})}),$(".product-tags-j").on("click",function(){var n=$(this),a=n.data("checked");t.find("input[name='"+n.attr("name")+"']").data("checked",0),a?n.prop("checked",!1):n.data("checked",1),e(t.serializeJSON())}),$(".product-tags-mobile-j").on("change",function(){e(t.serializeJSON())})}),$(function(){$("#owl-customer-images-j").owlCarousel({loop:!0,autoplay:!0,responsiveClass:!0,dotsClass:"owl-dots m-t",responsive:{0:{items:1},768:{items:3},992:{items:4}}}),$(".expand-j").on("click",function(){$(".expandable-j").toggleClass("nowrap")})});var changeCategoryPageContent=function(e,t,n,a,r){$("h1").html(e),document.title=t,$('meta[name="description"]').attr("content",n);var i=$("#category-summary-j");i.html(a),""!=a?i.show():i.hide();var o=$("#category-description-j");o.html(r),""!=r?o.show():o.hide()};