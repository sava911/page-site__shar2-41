function changeHeaderMiniCart(t){t?($(".header-mini-cart-empty-j").hide(),$(".header-mini-cart-not-empty-j").show()):($(".header-mini-cart-not-empty-j").hide(),$(".header-mini-cart-empty-j").show()),$("#header-mini-cart-quantity-val-j").html(t)}$(function(){function t(t,n){var o={sku_id:t,quantity:n};$.ajax({method:"POST",url:"/cart/change_quantity",data:o,beforeSend:function(){startSpinner(e)},success:function(t){a(t)},complete:function(){stopSpinner(e)}})}function n(t){""==t?window.location.reload():($("#cart-items-templating-j").html(t),$("body").animate({scrollTop:$(e).offset().top-50},0))}function a(t){$(".cart-totals-templating-j").html(t)}var e=$("#cart-page-j");$(document).on("click",".quantity-minus-j",function(){var n=$(this).data("sku-id"),a=$("#quantity_sku_id_"+n),e=a.val();e>1&&(a.val(e-1),t(n,a.val()))}),$(document).on("click",".quantity-plus-j",function(){var n=$(this).data("sku-id"),a=$("#quantity_sku_id_"+n);a.val(+a.val()+1),t(n,a.val())}),$(document).on("change",".quantity-val-j",function(){var n=$(this);t(n.data("sku-id"),n.val())}),$(document).on("click",".remove-j",function(){var t={sku_id:$(this).data("sku-id")};$.ajax({method:"POST",url:"/cart/remove",data:t,beforeSend:function(){startSpinner(e)},success:function(t){n(t.stock_keeping_units),a(t.totals)},complete:function(){stopSpinner(e)}})}),$(document).on("submit","#loyalty-card-form-j",function(t){t.preventDefault();var n=$(this),o=n.find("input[name=loyalty_card]"),r=o.val(),i=n.find(".loyalty-card-empty-error-j"),c=n.find(".loyalty-card-not-found-error-j");if(i.hide(),c.hide(),o.parent().removeClass("has-error"),""==r)i.show();else{var d={loyalty_card:r};$.ajax({method:"POST",url:"/cart/loyalty_card",data:d,beforeSend:function(){startSpinner(e)},success:function(t){a(t)},error:function(){c.show(),o.parent().addClass("has-error")},complete:function(){stopSpinner(e)}})}}),$(document).on("submit","#promocode-form-j",function(t){t.preventDefault();var n=$(this),o=n.find("input[name=promocode]"),r=o.val(),i=n.find(".promocode-empty-error-j"),c=n.find(".promocode-not-found-error-j");if(i.hide(),c.hide(),o.parent().removeClass("has-error"),""==r)i.show();else{var d={promocode:r};$.ajax({method:"POST",url:"/cart/promocode",data:d,beforeSend:function(){startSpinner(e)},success:function(t){a(t)},error:function(){c.show(),o.parent().addClass("has-error")},complete:function(){stopSpinner(e)}})}})});