$(function(){$("#message-form-j").on("submit",function(e){e.preventDefault();var r=$(this),a=r.find("#message-email-j"),s=r.find("#message-text-j"),o=r.find("#message-email-error-j"),n=r.find("#message-text-error-j");o.hide(),o.parents(".form-group").removeClass("has-error"),n.hide(),n.parents(".form-group").removeClass("has-error");var m=!0;if(""!=a.val()&&validateEmail(a.val())||(o.parents(".form-group").addClass("has-error"),o.show(),m=!1),""==s.val()&&(n.parents(".form-group").addClass("has-error"),n.show(),m=!1),m){var t={name:r.find("input[name=name]").val(),email:a.val(),message:s.val()};$.ajax({method:"POST",url:"/message",data:t,beforeSend:function(){startSpinner(r)},success:function(e){$("#message-templating-j").html(e)},error:function(e){for(var r in e.responseJSON)"email"==r&&(o.parents(".form-group").addClass("has-error"),o.show()),"message"==r&&(n.parents(".form-group").addClass("has-error"),n.show())},complete:function(){stopSpinner(r)}})}})});