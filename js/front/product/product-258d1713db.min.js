function changeHeaderMiniCart(t){t?($(".header-mini-cart-empty-j").hide(),$(".header-mini-cart-not-empty-j").show()):($(".header-mini-cart-not-empty-j").hide(),$(".header-mini-cart-empty-j").show()),$("#header-mini-cart-quantity-val-j").html(t)}!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.lightbox=e(t.jQuery)}(this,function(t){function e(e){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=t.extend({},this.constructor.defaults),this.option(e)}return e.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:600,fitImagesInViewport:!0,imageFadeDuration:600,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1,sanitizeTitle:!1},e.prototype.option=function(e){t.extend(this.options,e)},e.prototype.imageCountLabel=function(t,e){return this.options.albumLabel.replace(/%1/g,t).replace(/%2/g,e)},e.prototype.init=function(){var e=this;t(document).ready(function(){e.enable(),e.build()})},e.prototype.enable=function(){var e=this;t("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(i){return e.start(t(i.currentTarget)),!1})},e.prototype.build=function(){if(!(t("#lightbox").length>0)){var e=this;t('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(t("body")),this.$lightbox=t("#lightbox"),this.$overlay=t("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.$image=this.$lightbox.find(".lb-image"),this.$nav=this.$lightbox.find(".lb-nav"),this.containerPadding={top:parseInt(this.$container.css("padding-top"),10),right:parseInt(this.$container.css("padding-right"),10),bottom:parseInt(this.$container.css("padding-bottom"),10),left:parseInt(this.$container.css("padding-left"),10)},this.imageBorderWidth={top:parseInt(this.$image.css("border-top-width"),10),right:parseInt(this.$image.css("border-right-width"),10),bottom:parseInt(this.$image.css("border-bottom-width"),10),left:parseInt(this.$image.css("border-left-width"),10)},this.$overlay.hide().on("click",function(){return e.end(),!1}),this.$lightbox.hide().on("click",function(i){return"lightbox"===t(i.target).attr("id")&&e.end(),!1}),this.$outerContainer.on("click",function(i){return"lightbox"===t(i.target).attr("id")&&e.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===e.currentImageIndex?e.changeImage(e.album.length-1):e.changeImage(e.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return e.currentImageIndex===e.album.length-1?e.changeImage(0):e.changeImage(e.currentImageIndex+1),!1}),this.$nav.on("mousedown",function(t){3===t.which&&(e.$nav.css("pointer-events","none"),e.$lightbox.one("contextmenu",function(){setTimeout(function(){this.$nav.css("pointer-events","auto")}.bind(e),0)}))}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return e.end(),!1})}},e.prototype.start=function(e){function i(t){a.album.push({alt:t.attr("data-alt"),link:t.attr("href"),title:t.attr("data-title")||t.attr("title")})}var a=this,n=t(window);n.on("resize",t.proxy(this.sizeOverlay,this)),t("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var o,r=0,s=e.attr("data-lightbox");if(s){o=t(e.prop("tagName")+'[data-lightbox="'+s+'"]');for(var d=0;d<o.length;d=++d)i(t(o[d])),o[d]===e[0]&&(r=d)}else if("lightbox"===e.attr("rel"))i(e);else{o=t(e.prop("tagName")+'[rel="'+e.attr("rel")+'"]');for(var h=0;h<o.length;h=++h)i(t(o[h])),o[h]===e[0]&&(r=h)}var l=n.scrollTop()+this.options.positionFromTop,c=n.scrollLeft();this.$lightbox.css({top:l+"px",left:c+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&t("html").addClass("lb-disable-scrolling"),this.changeImage(r)},e.prototype.changeImage=function(e){var i=this;this.disableKeyboardNav();var a=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),t(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var n=new Image;n.onload=function(){var o,r,s,d,h,l;a.attr({alt:i.album[e].alt,src:i.album[e].link}),t(n),a.width(n.width),a.height(n.height),i.options.fitImagesInViewport&&(l=t(window).width(),h=t(window).height(),d=l-i.containerPadding.left-i.containerPadding.right-i.imageBorderWidth.left-i.imageBorderWidth.right-20,s=h-i.containerPadding.top-i.containerPadding.bottom-i.imageBorderWidth.top-i.imageBorderWidth.bottom-120,i.options.maxWidth&&i.options.maxWidth<d&&(d=i.options.maxWidth),i.options.maxHeight&&i.options.maxHeight<d&&(s=i.options.maxHeight),(n.width>d||n.height>s)&&(n.width/d>n.height/s?(r=d,o=parseInt(n.height/(n.width/r),10),a.width(r),a.height(o)):(o=s,r=parseInt(n.width/(n.height/o),10),a.width(r),a.height(o)))),i.sizeContainer(a.width(),a.height())},n.src=this.album[e].link,this.currentImageIndex=e},e.prototype.sizeOverlay=function(){this.$overlay.width(t(document).width()).height(t(document).height())},e.prototype.sizeContainer=function(t,e){function i(){a.$lightbox.find(".lb-dataContainer").width(r),a.$lightbox.find(".lb-prevLink").height(s),a.$lightbox.find(".lb-nextLink").height(s),a.showImage()}var a=this,n=this.$outerContainer.outerWidth(),o=this.$outerContainer.outerHeight(),r=t+this.containerPadding.left+this.containerPadding.right+this.imageBorderWidth.left+this.imageBorderWidth.right,s=e+this.containerPadding.top+this.containerPadding.bottom+this.imageBorderWidth.top+this.imageBorderWidth.bottom;n!==r||o!==s?this.$outerContainer.animate({width:r,height:s},this.options.resizeDuration,"swing",function(){i()}):i()},e.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn(this.options.imageFadeDuration),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},e.prototype.updateNav=function(){var t=!1;try{document.createEvent("TouchEvent"),t=!!this.options.alwaysShowNavOnTouchDevices}catch(t){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(t&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),t&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),t&&this.$lightbox.find(".lb-next").css("opacity","1"))))},e.prototype.updateDetails=function(){var e=this;if(void 0!==this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title){var i=this.$lightbox.find(".lb-caption");this.options.sanitizeTitle?i.text(this.album[this.currentImageIndex].title):i.html(this.album[this.currentImageIndex].title),i.fadeIn("fast").find("a").on("click",function(e){void 0!==t(this).attr("target")?window.open(t(this).attr("href"),t(this).attr("target")):location.href=t(this).attr("href")})}if(this.album.length>1&&this.options.showImageNumberLabel){var a=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(a).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return e.sizeOverlay()})},e.prototype.preloadNeighboringImages=function(){this.album.length>this.currentImageIndex+1&&((new Image).src=this.album[this.currentImageIndex+1].link),this.currentImageIndex>0&&((new Image).src=this.album[this.currentImageIndex-1].link)},e.prototype.enableKeyboardNav=function(){t(document).on("keyup.keyboard",t.proxy(this.keyboardAction,this))},e.prototype.disableKeyboardNav=function(){t(document).off(".keyboard")},e.prototype.keyboardAction=function(t){var e=t.keyCode,i=String.fromCharCode(e).toLowerCase();27===e||i.match(/x|o|c/)?this.end():"p"===i||37===e?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):"n"!==i&&39!==e||(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},e.prototype.end=function(){this.disableKeyboardNav(),t(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),t("select, object, embed").css({visibility:"visible"}),this.options.disableScrolling&&t("html").removeClass("lb-disable-scrolling")},new e}),$(function(){$("#wrapper-j").on("change",".sku-radio-j",function(){var t=$(this);$("#product_thumb_"+t.data("product-id")+"_val_j").html(t.data("price"))}).on("change",".sku-select-j",function(){var t=$(this).find(":selected");$("#product_thumb_"+t.data("product-id")+"_val_j").html(t.data("price"))})}),$(function(){$("#wrapper-j").on("click",".add-to-cart-j, .product-page-add-to-cart-j",function(e){var i=$(this),a=$('input[name="product_'+i.data("product-id")+'"]');if(a.length)n=a.filter(":checked").val();else var n=$('select[name="product_'+i.data("product-id")+'"] option:selected').val();var o={sku_id:n,quantity:1};$.ajax({method:"POST",url:"/cart/add",data:o,beforeSend:function(){i.attr("disabled",!0)},success:function(e){t(i,e.sku),changeHeaderMiniCart(e.totals.quantity),$("#add-to-basket-modal-templating-j").html(e.sku_view),$("#add-to-basket-modal-j").modal("show")},complete:function(){i.attr("disabled",!1)}})});var t=function(t,e){return window.dataLayer.push({ecommerce:{currencyCode:"RUB",add:{products:[{id:e.product.id,name:e.product.name,price:e.price,category:e.product.breadcrumbs_plain,variant:e.name}]}}}),gtag("event","add_to_cart",{items:[{id:e.product.id,name:e.product.name,price:e.price,category:e.product.breadcrumbs_plain,variant:e.name}]}),t.is(".product-page-add-to-cart-j")?gtag("event","AddToCartFromPDP",{event_category:"Button"}):"/"==window.location.pathname?gtag("event","AddToCartFromHome",{event_category:"Button"}):gtag("event","AddToCartFromCategory",{event_category:"Button"})}}),$(function(){$("#owl-images-cover-j").owlCarousel({items:1,nav:!1,navContainerClass:"owl-nav m-t-0",navText:["",""],navClass:["pull-left icon-arrow-circle-left","pull-right icon-arrow-circle-right"],dotsClass:"owl-dots m-t-0"}),lightbox.option({albumLabel:"Изображение %1 из %2"}),$("#owl-related-products-j").owlCarousel({responsiveClass:!0,margin:16,dotsClass:"owl-dots m-t",responsive:{0:{items:2},768:{items:3},992:{items:4},1222:{items:5}}});var t=$("#one-click-order-modal-j");$("#one-click-order-modal-trigger-j").on("click",function(){var e=$(this),i=$('input[name="product_'+e.data("product-id")+'"]');if(i.length)a=i.filter(":checked").val();else var a=$('select[name="product_'+e.data("product-id")+'"] option:selected').val();var n={sku_id:a,quantity:1};$.ajax({method:"POST",url:"/cart/add",data:n,beforeSend:function(){e.attr("disabled",!0)},success:function(e){yaCounter24676250.reachGoal("OneClick"),changeHeaderMiniCart(e.totals.quantity),t.modal("show"),$("#one-click-order-phone-j").mask("8(999)999-99-99")},complete:function(){e.attr("disabled",!1)}})}),$("#wrapper-j").on("submit","#one-click-order-form-modal-j",function(e){e.preventDefault();var i=$("#one-click-order-phone-j"),a=$("#one-click-order-empty-phone-error-j");if(a.hide(),i.parents(".form-group").removeClass("has-error"),""==i.val())i.parents(".form-group").addClass("has-error"),a.show();else{var n={phone:i.val()};$.ajax({method:"POST",url:"/one_click_order",data:n,beforeSend:function(){startSpinner(t)},success:function(t){yaCounter24676250.reachGoal("SendOneClick"),$("#one-click-order-modal-templating-j").html(t)},error:function(){i.parents(".form-group").addClass("has-error"),a.show()},complete:function(){stopSpinner(t)}})}})});